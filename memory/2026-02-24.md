# 2026-02-24

## Work completed (rsproule tasks, multi-day sprint)

### manhog (manual-hog)
- PRs #19-#24 all merged: stacked bar charts by client_id, shared colors, DAU/WAU charts, exclude internal toggle, EST timezone, 72h/1week/alltime views
- PR #25 open: DAU crash fix — `toStartOfInterval` 3rd arg is `origin` not `timezone`, React hooks violation (useMemo after early return)
- Key: ClickHouse `toStartOfInterval(date, INTERVAL, tz)` 3-arg form treats 3rd arg as origin, NOT timezone. Use 4-arg or workaround.
- 1week view uses `toStartOfHour - (hour % 4)` for 4-hour buckets
- `normalizeDate` appends `Z` to treat bare timestamps as UTC

### agentcash
- PR #74 (client-id fallback), #75 (send endpoint), #78 (version flag), #89 (remove OpenAPI cache) all merged
- PR #77 open: gates `/api/send` with `@agentcash/router` dynamic `payTo`. Preview can't test — Coinbase CDP CORS blocks non-prod URLs.
- Deleted broken `HTTPFacilitatorClient` middleware (initialized without CDP auth headers → 500)

### agentcash-router
- PR #63 merged (v0.6.0→v0.6.1): `payTo` option on `.paid()` — string or `(request) => string | Promise<string>`
- `resolvePayTo()` in `src/orchestrate.ts` handles static, async fn, or fallback

### the-stables
- PR #42: Removed all 12 LinkedIn routes (Data365 key unsupported), fixed old JWT compat (`if (w && ...)`), dismissed Vercel bot false positives
- PR #49: Dismissed Vercel bot false positive on Grok truncation `repairTruncatedJson`
- PR #50: Fixed stablesocial homepage — `npx agentcash fetch` CLI examples, `stablesocial.dev` domain
- llms.txt rewrite still pending on `absolute-firehose` branch — must keep protocol-agnostic style, add SIWX auth, remove x402/agentcash tool references
- Data365 credit monitoring exists at `apps/stablesocial/lib/monitor/data365.ts` but no cron/Discord alerts wired

### Other
- poncho PR #229: artifacts panel tree structure fix
- x402scan PR #648: CORS on 402 responses; PR #640: non-string query params fix
- CraigClaw PR #24: git email fix; #rfs-craig channel configured `requireMention: false`

## Key technical patterns
- agentcash default branch: `master`; agentcash-router: `main`; manhog: `master`; the-stables: `master`
- StableSocial async two-step: POST (pay) → token → GET /api/jobs?token=... (free, SIWX wallet auth). All 57 endpoints async.
- GitHub App token can't push branches modifying `.github/workflows/`
- Handler functions in router must return `Promise<unknown>` (use `Promise.resolve()`)
- agentcash CLI: `-m` for method, `-b` for body (not curl-style `-X`/`-d`)

## Preferences (rsproule)
- Charts: stacked bar (not area), vivid colors (no grays), deterministic color per client_id
- Wants 1 big message not several consecutive
- llms.txt: protocol-agnostic, no tool-specific names, clean generic language
- Shafu: no unnecessary comments in code
